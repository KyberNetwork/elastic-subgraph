import {test, assert, log} from "matchstick-as/assembly/index"
import {  
    Bytes,
    ByteArray,
    ethereum
  } from '@graphprotocol/graph-ts';
import { DecodeCollectEvent } from "../src/mappings/core";
//event.transaction.input
//0xac9650d80000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002c000000000000000000000000000000000000000000000000000000000000000a498e04d7700000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000007d18d98489ae30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000637604e7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000084ed0d8dd200000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000637604e7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064bf1316c1000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000000000000000000000000000000000000000000021fedce90000000000000000000000002b6efcce98fe1e46967f8ce49bd258007c796945000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064bf1316c1000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec7000000000000000000000000000000000000000000000000000000002216cf5e0000000000000000000000002b6efcce98fe1e46967f8ce49bd258007c79694500000000000000000000000000000000000000000000000000000000
test("decode tx hash: 0x7607f7b24f8cf90361f73c626afc56bd198f126ec416c1110654712fcbfa6ff0", () => {
    let hexData = "0xac9650d80000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000002c000000000000000000000000000000000000000000000000000000000000000a498e04d7700000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000007d18d98489ae30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000637604e7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000084ed0d8dd200000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000637604e7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064bf1316c1000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000000000000000000000000000000000000000000021fedce90000000000000000000000002b6efcce98fe1e46967f8ce49bd258007c796945000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064bf1316c1000000000000000000000000dac17f958d2ee523a2206206994597c13d831ec7000000000000000000000000000000000000000000000000000000002216cf5e0000000000000000000000002b6efcce98fe1e46967f8ce49bd258007c79694500000000000000000000000000000000000000000000000000000000"
    let byteData = ByteArray.fromHexString(hexData)
    assert.stringEquals(DecodeCollectEvent(Bytes.fromByteArray(byteData)).toString(), "18")
}) 
